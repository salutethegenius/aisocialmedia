{% extends "base.html" %}

{% block content %}
<h2>Welcome, {{ user.username }}!</h2>

<div id="social-media-connections">
    <h3>Social Media Connections</h3>
    {% if user.twitter_token %}
        <p>Twitter: Connected</p>
    {% else %}
        <a href="{{ url_for('twitter_login') }}" class="btn">Connect Twitter</a>
    {% endif %}
    <!-- Add other social media platforms here -->
</div>

<div id="content-generator">
    <h3>Generate New Content</h3>
    <form id="generate-form">
        <div>
            <label for="topic">Topic:</label>
            <input type="text" id="topic" name="topic" required>
        </div>
        <div>
            <label for="tone">Tone:</label>
            <select id="tone" name="tone" required>
                <option value="informative">Informative</option>
                <option value="casual">Casual</option>
                <option value="professional">Professional</option>
                <option value="humorous">Humorous</option>
            </select>
        </div>
        <button type="submit">Generate Content</button>
    </form>
    <div id="generated-content" style="display: none;">
        <h4>Generated Content:</h4>
        <textarea id="content-text" rows="10" cols="50"></textarea>
        <p>Tokens used: <span id="tokens-used"></span></p>
        <button id="save-content">Save Content</button>
    </div>
</div>

<div id="saved-contents">
    <h3>Saved Contents</h3>
    {% for content in contents %}
        <div class="content-item">
            <h4>{{ content.topic }} ({{ content.tone }})</h4>
            <p>{{ content.content[:100] }}...</p>
            <p>Tokens used: {{ content.tokens_used }}</p>
            <button class="edit-content" data-id="{{ content.id }}">Edit</button>
            <button class="schedule-post" data-id="{{ content.id }}">Schedule Post</button>
        </div>
    {% endfor %}
</div>

<div id="scheduled-posts">
    <h3>Scheduled Posts</h3>
    <ul id="scheduled-posts-list"></ul>
</div>

<div id="edit-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <h3>Edit Content</h3>
        <textarea id="edit-content-text" rows="10" cols="50"></textarea>
        <button id="update-content">Update</button>
        <button id="close-modal">Close</button>
    </div>
</div>

<div id="schedule-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <h3>Schedule Post</h3>
        <form id="schedule-form">
            <input type="hidden" id="schedule-content-id">
            <div>
                <label for="schedule-time">Schedule Time:</label>
                <input type="datetime-local" id="schedule-time" required>
            </div>
            <div>
                <label for="schedule-platform">Platform:</label>
                <select id="schedule-platform" required>
                    <option value="twitter">Twitter</option>
                    <!-- Add other platforms here -->
                </select>
            </div>
            <button type="submit">Schedule</button>
            <button id="close-schedule-modal">Cancel</button>
        </form>
    </div>
</div>
{% endblock %}
