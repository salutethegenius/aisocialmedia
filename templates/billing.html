{% extends "base.html" %}

{% block content %}
<h2>Billing Information</h2>

{% if content %}
<h3>Content Details:</h3>
<p><strong>Topic:</strong> {{ content.topic }}</p>
<p><strong>Tone:</strong> {{ content.tone }}</p>
<p><strong>Preview:</strong> {{ content.content[:100] }}...</p>
<p><strong>Tokens Used:</strong> {{ content.tokens_used }}</p>
<p><strong>Total Cost:</strong> ${{ "%.2f"|format(content.tokens_used * 0.05) }}</p>
{% endif %}

<form method="POST" action="{{ url_for('billing') }}">
    <button type="submit" id="checkout-button">Proceed to Checkout</button>
</form>

<script src="https://js.stripe.com/v3/"></script>
<script>
    var checkoutButton = document.getElementById('checkout-button');
    checkoutButton.addEventListener('click', function() {
        // We'll handle the checkout in the server-side
    });
</script>
{% endblock %}
